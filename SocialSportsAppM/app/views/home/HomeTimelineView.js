SocialSports.views.HomeTimeline = Ext.extend(Ext.Panel, {	//html: '<a href="#Home/about" class="menu-item"> About</a>',	//html: 'Aqui vão aparecer as mensagens com interesse para o utilizador',	//scroll: 'vertical',	id: 'timelinepanel',	styleHtmlContent: true,	style: 'background: #d8e2ef',		initComponent: function(){			var messagestore, tpl, panel, btactualizar;				Ext.regModel('Mensagens', {			fields: ['imagem', 'name', 'message', 'data', 'hora', 'fonte']		});				btactualizar = {			id: 'btactualizar',			xtype:'button',			cls: 'bt_preferences',			ui: 'action',			text: 'Actualizar timeline',			dock: 'top',			handler: this.onUpdateAction,			scope: this		};						messagestore = new Ext.data.Store({				model: 'Mensagens',				id: 'datastore',				proxy:{					type: 'scripttag',					//url: 'http://localhost/JsonExperience/JSONObjects',					url: 'http://localhost:8081/SocSports/JSONPlayers',					extraParams: {                    format: 'json'					},					reader: {						type: 'json',						root: 'items'					}				}		});				messagestore.sync();		messagestore.load();				tpl = new Ext.XTemplate(				'<tpl for=".">',					'<div class = "items">',					'<img src=http://src.sencha.io/40/40/{imagem}> <b class ="textoopc"> {name}</b> </br><b class ="msgtexto">{message:this.linkify}</b> </br>' +					'<b class = "msgdatafonte"> {data} às {hora} </b> <b class = "opcoes"> Fonte: {fonte} </b></br></br>',					'</div>',				'</tpl>',				{					//coloca um link se verificar uma string com http://					linkify:function(value){						return value.replace(/(http:\/\/[^\s]*)/g, "<a target=\"_blank\" href=\"$1\">$1</a>");					}				}			);		panel = new Ext.Panel({			fullscreen: true,			id: 'viewpanel',			layout: 'fit',						items: new Ext.DataView({				store: messagestore,				tpl: tpl,				scroll: 'vertical',				itemSelector: 'div.items',				emptyText: 'No data to display',				styleHtmlContent: true,				style: 'background: #d8e2ef'			})		});				Ext.apply(this, {				scroll: 'vertical',				dockedItems: [btactualizar],				items: [panel],		});				SocialSports.views.HomeTimeline.superclass.initComponent.call(this);	},		onUpdateAction: function(){		//var updpanel = Ext.getCmp('timelinepanel');		//updpanel.initComponent();		/*Ext.StoreMgr.get('datastore').load();		Ext.dispatch({			controller:'Home',			action: 'timeline',		});*/		window.location.reload();	},});Ext.reg('HomeTimeline', SocialSports.views.HomeTimeline);