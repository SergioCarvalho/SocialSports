SocialSports.views.HomePreferences = Ext.extend(Ext.form.FormPanel, {	id: 'preferencesform',	defaultInstructions: 'Indique as suas preferências por favor',	initComponent: function(){				var btsavepreferences, fields;				btsavepreferences = {			id: 'preferencesFormSaveButton',			xtype:'button',			cls: 'bt_preferences',			ui: 'action',			text: 'Guardar Preferências',			dock: 'bottom',			handler: this.onSaveAction,			scope: this		};				fields = {					xtype: 'fieldset',			id: 'preferencesFormFieldset',			instructions: this.defaultInstructions,						items: [				{					xtype: 'selectfield',					cls: 'bt_selectfield',                    name: 'tipoinformacao',                    label: 'Tipo(s) de informação',					options: [{						text: 'Informação',						value: 'info'					},					{						text: 'Geral',						value: 'geral'					},					{						text: 'Informação e Geral',						value: 'geralinfo'					},					],                  //  autoCapitalize : true				},				{                    xtype: 'SocialSports.views.ErrorField',                    fieldname: 'tipoinformacao',				},				{					xtype: 'selectfield',					cls: 'bt_selectfield',                    name: 'lingua',                    label: 'Língua(s)',					options: [{						text: 'Português',						value: 'portugues'					},					{						text: 'Inglês',						value: 'ingles'					},					{						text: 'Português e Inglês',						value: 'portuguesingles'					},					],                  //  autoCapitalize : true				},				{                    xtype: 'SocialSports.views.ErrorField',                    fieldname: 'lingua',				},				{					xtype: 'selectfield',					cls: 'bt_selectfield',                    name: 'fontesinformacao',                    label: 'Fonte(s) de informação',					options: [{						text: 'Twitter',						value: 'twitter'					},					{						text: 'SocialSports',						value: 'socialsports'					},					{						text: 'Twitter e SocialSports',						value: 'socsportstwitter'					},					],                  //  autoCapitalize : true				},				{                    xtype: 'SocialSports.views.ErrorField',                    fieldname: 'fontesinformacao',				},			],		};				Ext.apply(this, {				scroll: 'vertical',				dockedItems: [btsavepreferences],				items: [ fields ],		});					SocialSports.views.HomePreferences.superclass.initComponent.call(this);			},		onSaveAction: function(){				var model = new SocialSports.models.PreferencesModel();    				Ext.dispatch({					controller: 'PreferencesController',					action: 'save',					data: this.getValues(),					record: model,					form: this				}); 		},				showErrors: function(errors) {        var fieldset = this.down('#preferencesFormFieldset');        this.fields.each(function(field) {            var fieldErrors = errors.getByField(field.name);            if (fieldErrors.length > 0) {                var errorField = this.down('#'+field.name+'ErrorField');                field.addCls('invalid-field');                errorField.update(fieldErrors);                errorField.show();            } else {                this.resetField(field);            }        }, this);        fieldset.setInstructions("Deve preencher todos os campos de preferências");    },    resetForm: function() {        var fieldset = this.down('#preferencesFormFieldset');        this.fields.each(function(field) {            this.resetField(field);        }, this);         fieldset.setInstructions(this.defaultInstructions);        this.reset();    },    resetField: function(field) {        var errorField = this.down('#'+field.name+'ErrorField');        errorField.hide();        field.removeCls('invalid-field');        return errorField;    }});Ext.reg('HomePreferences', SocialSports.views.HomePreferences);